{% load static %}
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FactChecker</title>
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
</head>
<body>


    <div class="app-container">
        
        <aside class="sidebar">
            <div class="sidebar-content">
                <h2 class="history-title">History</h2>
                <div class="history-list">
                    {% if user.is_authenticated %}
                        {% for item in history %}
                            <div class="history-item" style="border-bottom: 1px solid #333; padding: 10px 0;">
                                <p style="margin: 0; font-size: 0.8rem; color: #888;">{{ item.created_at|date:"d M, H:i" }}</p>
                                <p style="margin: 5px 0; font-weight: bold; color: #fff;">{{ item.text|truncatechars:40 }}</p>
                                <span style="font-size: 0.85rem; color: #4ade80;">{{ item.result_text }}</span>
                            </div>
                        {% empty %}
                            <p style="color: #666; padding: 20px;">No history yet.</p>
                        {% endfor %}
                    {% else %}
                        <p style="color: #666; padding: 20px;">Log in to see your history.</p>
                    {% endif %}
                </div>
            </div>

            <div class="sidebar-bottom">
                <input type="checkbox" id="theme-toggle" style="display: none;"> 
    
                <label for="theme-toggle" class="theme-btn-label"></label>

                <div class="client-info">
                    <span class="avatar">ðŸ‘¤</span>
                    {% if user.is_authenticated %}
                        <span class="client-name">{{ user.username }}</span>
                    {% else %} 
                    <span class="client-name">[Username]</span>   
                    {% endif %}    
                </div>
            </div>
        </aside>

        <main class="main-content">
            
            <header class="top-bar">
                {% if user.is_authenticated %}
                    <span style="color: white; margin-right: 15px;">{{ user.username }}</span>
                    <a href="{% url 'logout' %}" class="sign-in-btn" style="text-decoration: none; display: inline-block; text-align: center;">Logout</a>
                {% else %}
                    <a href="{% url 'login' %}" class="sign-in-btn" style="text-decoration: none; display: inline-block; text-align: center;">Log in</a>
                {% endif %}
            </header>

            <section class="content-area">
                <div class="content-box" id="result-display">
                    </div>
            </section>

            <footer class="input-container">
                <div class="search-oval">
                    <input type="text" id="news-input" placeholder="What'd you like to check?">
                    <button class="check-btn" id="check-btn">Check</button>
                </div>
            </footer>

        </main>
    </div>
    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>
